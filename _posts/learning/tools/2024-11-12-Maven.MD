---
title: Maven
date: 2024-11-12 00:00:00 +0100
categories: [ tools, build-tools ]
tags: [ maven ] # TAG names should always be lowercase
---

## Effective POM

View all `pom.xml` details by:

- IntelliJ: PPM on `pom.xml` -> Show effective POM!
- or `mvn help:effective-pom`

## Versioning templates

Define `maven` to increase performance:

```shell
maven() {
  mvn -T1C "$@"
}
```

Define release version templates:

```shell
# Assuming current development version is `X.Y.Z-SNAPSHOT`
RELEASE_MAJOR_TEMPLATE='${parsedVersion.nextMajorVersion}.0.0'
RELEASE_MINOR_TEMPLATE='${parsedVersion.majorVersion}.${parsedVersion.nextMinorVersion}.0'
RELEASE_PATCH_TEMPLATE='${parsedVersion.majorVersion}.${parsedVersion.minorVersion}.${parsedVersion.incrementalVersion}'
NEXT_SNAPSHOT_TEMPLATE='${parsedVersion.majorVersion}.${parsedVersion.minorVersion}.${parsedVersion.nextIncrementalVersion}-SNAPSHOT'
```

Evaluate version number using given template:

```shell
mvn_evaluate_version() {
  maven --non-recursive --quiet -DforceStdout build-helper:parse-version help:evaluate
}

evaluate_version() {
  echo "$1" | mvn_evaluate_version
}
```

Set given version in `pom.xml` files:

```shell
mvn_set_version() {
  maven versions:set -DnewVersion="$1" -DgenerateBackupPoms=false -DprocessAllModules
}
```

## Remove `-SNAPSHOT` suffix

```shell
mvn versions:set -DremoveSnapshot
```
